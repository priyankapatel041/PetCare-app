<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://kit.fontawesome.com/ec8478f83d.js" crossorigin="anonymous"></script>
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="icon" href="./image_resources/LOGO.jpeg" />

  <link rel="stylesheet" href="./css/Appointment.css">
  <title>PETCARE</title>

</head>

<body>
  <nav class="navbar navbar-dark bg-fixed-top d-flex align-items-center justify-content-between" id="navv">
    <div class="container-fluid" id="nav">
      <a class="navbar-brand" href="#"><img src="https://veteva.com/wp-content/uploads/2023/02/logo-1.png" alt=""
          class="img"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar"
        aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
        aria-labelledby="offcanvasDarkNavbarLabel">
        <div class="offcanvas-header">
          <img src="https://veteva.com/wp-content/uploads/2023/02/logo-1.png" alt="" class="img">
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="./index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="./doctors.html">Consult Vet</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./medicine.html">Order Medicine</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Healthcare Product</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./Pages/Login.html">Login/Signup</a>
            </li>

          </ul>
          <form class="d-flex mt-3" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-success" type="submit">Search</button>
          </form>
        </div>
      </div>
    </div>
  </nav>
  <!-- main -->
  <main>
    <div id="container">
      <!--This is a division tag for body container-->
      <div id="body_header">
        <!--This is a division tag for body header-->
        <h1>Appointment Request Form</h1>
        <p>Make your appointment</p>

      </div>
      <form id="form">
        <fieldset>
          <legend><span class="number">1</span>Your details</legend>
          <label for="name">Name*:</label>
          <input type="text" id="name" name="user_name" placeholder="Atchyut (only first names)" required
            pattern="[a-zA-Z0-9]+">

          <label for="mail">Email*:</label>
          <input type="email" id="mail" name="user_email" placeholder="abc@xyz.com" required>


          <label for="date">Date*:</label>
          <input type="date" id="date" value="" required></input>
          <br>
          <label for="time">Time*:</label>
          <input type="time" id="time" value="" required></input>
          <br>
        </fieldset>

        <button id="submit">Book</button>
      </form>
    </div>
  </main>

  <!-- footer -->
  <footer class="footer-distributed">

    <div class="footer-left">

      <img style="width: 40%;" src="https://veteva.com/wp-content/uploads/2023/02/logo-1.png" alt="">

      <p class="footer-links">
        <a href="#" class="link-1">Home</a>

        <a href="#">Blog</a>

        <a href="#">Pricing</a>

        <a href="#">About</a>

        <a href="#">Faq</a>

        <a href="#">Contact</a>
      </p>

      <p class="footer-company-name">Company Name Â© 2015</p>
    </div>

    <div class="footer-center">

      <div>
        <i class="fa fa-map-marker"></i>
        <p><span>444 S. Cedros Ave</span> Solana Beach, California</p>
      </div>

      <div>
        <i class="fa fa-phone"></i>
        <p>+1.555.555.5555</p>
      </div>

      <div>
        <i class="fa fa-envelope"></i>
        <p><a href="mailto:support@company.com">support@company.com</a></p>
      </div>

    </div>

    <div class="footer-right">

      <p class="footer-company-about">
        <span>About the company</span>
        Searching for vets near you, a pet clinic near you or a veterinary hospital near you at odd hours ? Don't worry,
        we have got you covered. Download the veteva app now and do an online vet consultation within 10 minutes 24/7.
        Explore India's trusted veterinary doctors with average experience of 15+ years on our platform.
      </p>

      <div class="footer-icons">

        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-linkedin"></i></a>
        <a href="#"><i class="fa fa-github"></i></a>

      </div>

    </div>

  </footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</html>

<script>
  // 
  function togglePopup() {
    document.getElementById("popup-1")
      .classList.toggle("active");
  }
  // 
  const navbar = document.getElementById('navbar');
  let scrolled = false;

  window.onscroll = function () {
    if (window.pageYOffset > 100) {
      navbar.classList.remove('top');

      if (!scrolled) {
        navbar.style.transform = 'translateY(-90px)';
      }
      setTimeout(function () {
        navbar.style.transform = 'translateY(0)';
        scrolled = true;
      }, 200);
    }
    else {
      navbar.classList.add('top');
      scrolled = false;
    }
  };

  // smooth scrolling
  // $('#navbar a, .btn').on('click', function(e){
  //   if (this.hash !=''){
  //     e.preventDefault();

  //     const hash = this.hash;

  //     $('html, body').animate(
  //       {
  //         scrollTop: $(hash).offset().top - 120,
  //       },
  //       800
  //     );
  //   }
  // });


  let form = document.querySelector('form');

  let Patient = document.getElementById("name");

  let email = document.getElementById("mail");
  // let contact = form.tel.value;
  let date = document.getElementById("date");
  let time = document.getElementById("time");
  const doctor = JSON.parse(localStorage.getItem("doctor"))
  let submit = document.getElementById("submit")
  submit.addEventListener("click", (el) => {
    el.preventDefault();
    check()
  })
  function check() {
    let obj = {
      doctor: doctor.name,
      Patient: Patient.value,
      email: email.value,
      date: date.value,
      time: time.value,

    }
    console.log(obj)
    fetch("https://petcare-lal5.onrender.com/appointment/check", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorisation": `${localStorage.getItem("token")}`
      },
      body: JSON.stringify(obj)
    })
      .then(response => response.json())
      .then(responseData => {
        // Process the response data and display it in the frontend
        console.log(responseData);
        if (!responseData.error) {
          localStorage.setItem("data", JSON.stringify(obj))
          window.location.href = "./Payment.html"
        } else {
          Swal.fire(
            'OOps!',
            responseData.error,
            'error'
          )
        }
      })
  }

  // go home
  let home = document.getElementById("home")
  home.addEventListener("click", (e) => {
    e.preventDefault()
    window.location.href = './index.html'
  })
</script>